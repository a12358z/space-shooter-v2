namespace SpriteKind {
    export const Gift_1 = SpriteKind.create()
    export const Gift_2 = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Gift_1, function (sprite, otherSprite) {
    otherSprite.destroy(effects.ashes, 100)
    gun_index = 1
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Gift_2, function (sprite, otherSprite) {
    otherSprite.destroy(effects.ashes, 100)
    gun_index = 2
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    console.log(gun_index)
    if (gun_index == 0) {
        dart = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . 2 . . . . 
            . . . . 6 . . 6 . . . 5 6 . . . 
            . . . . . 2 5 2 5 2 5 2 5 2 . . 
            . . . . 6 . . 6 . . . 5 6 . . . 
            . . . . . . . . . . . 2 . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, spacePlane, 200, 0)
    } else if (gun_index == 1) {
        dart = sprites.createProjectileFromSprite(img`
            ............................ccccccc.............................
            ..........................cccccccc1cc...........................
            .........................cccccccccc1cc..........................
            .........................c1ccccccccccc..........................
            ........................cccccccccccc1cc.........................
            ........................c1ccccccccccccc.........................
            ........................ccccccccccccccc.........................
            ........................cccccccc1cccccc.........................
            ........................1ccccccc1cccccc.........................
            ........................cccccccccccc1cc.........................
            ........................ccccccccccccccc.........................
            .........................cccccccccc1cc..........................
            .........................c11ccccccc1cc..........................
            ..........................ccc1ccccccc...........................
            ............................ccccccc.............................
            ................................................................
            ................................................................
            ................................................................
            ............................ccccccc.............................
            ..........................cccccccc1cc...........................
            .........................cccccccccc1cc..........................
            .........................c1ccccccccccc..........................
            ........................cccccccccccc1cc.........................
            ........................c1ccccccccccccc.........................
            ........................ccccccccccccccc.........................
            ........................cccccccc1cccccc.........................
            ........................1ccccccc1cccccc.........................
            ........................cccccccccccc1cc.........................
            ........................ccccccccccccccc.........................
            .........................cccccccccc1cc..........................
            .........................c11ccccccc1cc..........................
            ..........................ccc1ccccccc...........................
            ............................ccccccc.............................
            ................................................................
            ............................ccccccc.............................
            ..........................cccccccc1cc...........................
            .........................cccccccccc1cc..........................
            .........................c1ccccccccccc..........................
            ........................cccccccccccc1cc.........................
            ........................c1ccccccccccccc.........................
            ........................ccccccccccccccc.........................
            ........................cccccccc1cccccc.........................
            ........................1ccccccc1cccccc.........................
            ........................cccccccccccc1cc.........................
            ........................ccccccccccccccc.........................
            .........................cccccccccc1cc..........................
            .........................c11ccccccc1cc..........................
            ..........................ccc1ccccccc...........................
            ............................ccccccc.............................
            ............................ccccccc.............................
            ..........................cccccccc1cc...........................
            .........................cccccccccc1cc..........................
            .........................c1ccccccccccc..........................
            ........................cccccccccccc1cc.........................
            ........................c1ccccccccccccc.........................
            ........................ccccccccccccccc.........................
            ........................cccccccc1cccccc.........................
            ........................1ccccccc1cccccc.........................
            ........................cccccccccccc1cc.........................
            ........................ccccccccccccccc.........................
            .........................cccccccccc1cc..........................
            .........................c11ccccccc1cc..........................
            ..........................ccc1ccccccc...........................
            ................................................................
            `, spacePlane, 300, 0)
    } else if (gun_index == 2) {
        dart = sprites.createProjectileFromSprite(img`
            ................................
            ..........22222222222...........
            ........222222222242222.........
            ......2222224442222442222.......
            .....222222222442222442222......
            ....22222222222442222444222.....
            ...2222222222222442222224222....
            ...2222222222222222222222222....
            ..222222222222255555222224222...
            ..225544222222552222552224222...
            .22254222222222222222222244222..
            .22254222222222222242222224222..
            .22254222222222222224222244222..
            .22254222444444222224222242222..
            .22222222225522442222422222552..
            .22222222222255244222422222252..
            .22222222222222222222422222552..
            .22222222222222222224422222522..
            .22222222222222244442222222222..
            .22222222222224442222222242222..
            .22242222222224422222222242222..
            ..224422222222222222222244222...
            ..222442222222222225522442222...
            ...2522444222222222522442255....
            ...2552224442222222224422552....
            ....22552222444222222222552.....
            .....225552222222222222552......
            ......2225555222222222552.......
            ........222255222222552.........
            ..........22222222222...........
            ................................
            ................................
            `, spacePlane, 300, 0)
    } else {
    	
    }
})
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy(effects.fire, 100)
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    otherSprite.destroy()
    info.changeLifeBy(-1)
})
/**
 * Space Shooter V2
 * 
 * Naujos funkcijos:
 * 
 * - Nauji ginklai, pagavus tam tikrus objektus
 */
let Gift: Sprite = null
let CurrentType = 0
let bogey: Sprite = null
let dart: Sprite = null
let spacePlane: Sprite = null
let gun_index = 0
gun_index = 0
spacePlane = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . a . . . . . . . . . . . . 
    . . . . a . . . . . . . . . . . 
    . . 4 a . a 6 a 6 a 6 a . . . . 
    . 4 2 a a a . . . . . . a . . . 
    4 5 2 a a a . . 4 . 4 . . a . . 
    . 4 2 a a a . . . . . . a . . . 
    . . 4 a . a 6 a 6 a 6 a . . . . 
    . . . . a . . . . . . . . . . . 
    . . . a . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.Player)
spacePlane.setFlag(SpriteFlag.StayInScreen, true)
info.setLife(3)
controller.moveSprite(spacePlane, 200, 200)
// Nauji blokai
let GiftTypes = [SpriteKind.Gift_1, SpriteKind.Gift_2]
game.onUpdateInterval(500, function () {
    bogey = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . e e e . . . . . 
        . . . . . . . . . 6 e . . . . . 
        . . . . . . e 6 e . e . . . . . 
        . . . 7 . e 6 . 6 e e . . . . . 
        . . . . . . e 6 e . e . . . . . 
        . . . . . . . . . 6 e . . . . . 
        . . . . . . . . e e e . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Enemy)
    bogey.setVelocity(-100, 0)
    bogey.setPosition(180, randint(0, 120))
})
game.onUpdateInterval(10000, function () {
    CurrentType = GiftTypes._pickRandom()
    Gift = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . 2 2 2 2 2 2 2 2 2 2 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, CurrentType)
    if (Gift.kind() == SpriteKind.Gift_1) {
        Gift.setImage(img`
            . . . . . . . . . . . . . . . . 
            . f f f f f f f f f f f f f f . 
            . f f f f f f f f f f f f f f . 
            . f f f f f f 1 1 f f f f f f . 
            . f f f f f 1 f 1 f f f f f f . 
            . f f f f 1 f f 1 f f f f f f . 
            . f f f f 1 f f 1 f f f f f f . 
            . f f f 1 f f f 1 f f f f f f . 
            . f f f f f f f 1 f f f f f f . 
            . f f f f f f f 1 f f f f f f . 
            . f f f f f f f 1 f f f f f f . 
            . f f f f f f f 1 f f f f f f . 
            . f f f f f f f 1 f f f f f f . 
            . f f f f f 1 1 1 1 1 f f f f . 
            . f f f f f f f f f f f f f f . 
            . . . . . . . . . . . . . . . . 
            `)
    } else {
        Gift.setImage(img`
            . . . . . . . . . . . . . . . . 
            . f f f f f f f f f f f f f f . 
            . f f f f f f f f f f f f f f . 
            . f f f f f f f f f f f f f f . 
            . f f f 1 1 1 1 1 1 f f f f f . 
            . f f f 1 f f f f 1 1 f f f f . 
            . f f f 1 1 f f f f 1 f f f f . 
            . f f f f f f f f f 1 f f f f . 
            . f f f f f f f f 1 1 f f f f . 
            . f f f f f f 1 1 1 f f f f f . 
            . f f f 1 1 1 1 f f f 1 f f f . 
            . f f f 1 1 f f f f f 1 f f f . 
            . f f f f 1 1 1 1 1 f 1 f f f . 
            . f f f f f f f f 1 1 1 f f f . 
            . f f f f f f f f f f f f f f . 
            . . . . . . . . . . . . . . . . 
            `)
    }
    Gift.setVelocity(-100, 0)
    Gift.setPosition(180, randint(0, 120))
})
